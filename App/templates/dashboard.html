{% extends "base.html" %}

{% block content %}
<div class="row">
    <div class="col-xs-8">
        <div class="panel panel-default">
            <div class="panel-heading">
            Producto actual
            </div>
            <div class="panel-body">
                <form action="" method="post">
                    <div class="row">
                        <div class="col-xs-8">
                            <select name="currentProduct" class="form-control">
                                {% for id,name in products %}
                                <option value="{{ id }}">{{ name }}</option>
                                {% endfor %}
                            </select>
                        </div>
                        <div class="col-xs-4">
                            <div class="btn-group">
                                <button type="submit" class="btn btn-default"><span class="glyphicon glyphicon-floppy-disk"></span></button>
                               <a href="{{ url_for('dashboard') }}" class="btn btn-default"><span class="glyphicon glyphicon-repeat"></span></a>
                            </div>
                        </div>
                    </div>
                </form>
            </div>
        </div>
        <div class="panel panel-default">
            <div class="panel-heading">
            Mediciones recientes
            </div>
            <div class="panel-body">
            </div>
        </div>
    </div>
    <div class="col-xs-4">
        <div class="panel panel-default">
            <div class="panel-heading">
            Acciones
            </div>
            <ul class="list-group">
                <li class="list-group-item"><a href="{{ url_for('reboot') }}"> Reiniciar</a></li>
                <li class="list-group-item"><a href="{{ url_for('shutdown') }}">Apagar</a></li>
                <li class="list-group-item"><a href="{{ url_for('netconfig') }}">Configurar red</a></li>
                <li class="list-group-item"><a href="{{ url_for('changepass') }}">Cambiar contrase&ntilde;a</a></li>
            </ul>
        </div>
    </div>
</div>
{% endblock %}

{% block additionaljs %}
    <script>

        var webSocket = null;
        var webSocketURI = "ws://{{serverAddr}}:{{serverPort}}/ws";

        $(document).ready(function() {
            webSocket = new WebSocket(webSocketURI);
            
            webSocket.onopen = function() {
                console.log("Conectado a: " + webSocketURI);
            }

            webSocket.onclose = function(e) {
                console.log("Desconectado de: " + webSocketURI + ", " + e);
            }

            webSocket.onmessage = function(e) {
                console.log("Mensaje recibido: " + e.data);
            }
        });


        $("#menu-toggle").click(function(e) {
            e.preventDefault();
            $("#wrapper").toggleClass("active");
        });

    </script>
{% endblock %}
